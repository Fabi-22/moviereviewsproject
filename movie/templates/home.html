{% extends 'base.html' %}
{% block content %}

<h1 class="mb-3">ğŸ¬ Movie Reviews</h1>
<p class="text-muted mb-4">Discover and explore our movie collection.</p>

<!-- Search form -->
<form method="GET" class="mb-4">
  <div class="mb-3">
    <label for="searchMovie" class="form-label fw-semibold">Search for Movie</label>
    <div class="input-group">
      <input id="searchMovie" type="text" class="form-control" name="searchMovie"
             value="{{ request.GET.searchMovie }}" placeholder="Type a title...">
      <button type="submit" class="btn btn-primary">Search</button>
    </div>
  </div>
</form>

{% if request.GET.searchMovie %}
  <p class="text-muted mb-3">Searching for: <strong>{{ request.GET.searchMovie }}</strong></p>
{% endif %}

<!-- Movie Cards Grid -->
<div class="row row-cols-1 row-cols-md-3 g-4 mb-5">
  {% for movie in movies %}
  <div class="col">
    <div class="card h-100 shadow-sm">
      {% if movie.image %}
      <img src="{{ movie.image.url }}" class="card-img-top" alt="{{ movie.title }}"
           style="height: 200px; object-fit: cover;">
      {% else %}
      <div class="bg-secondary d-flex align-items-center justify-content-center"
           style="height: 200px;">
        <span class="text-white fs-1">ğŸï¸</span>
      </div>
      {% endif %}

      <div class="card-body d-flex flex-column">
        <h5 class="card-title fw-bold">{{ movie.title }}</h5>
        <p class="card-text text-muted small flex-grow-1">{{ movie.description }}</p>

        <div class="mt-2">
          {% if movie.genre %}
          <span class="badge bg-primary me-1">{{ movie.genre }}</span>
          {% endif %}
          {% if movie.year %}
          <span class="badge bg-secondary">{{ movie.year }}</span>
          {% endif %}
        </div>

        {% if movie.url %}
        <a href="{{ movie.url }}" class="btn btn-outline-primary btn-sm mt-3" target="_blank">
          ğŸ”— Movie Link
        </a>
        {% endif %}
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <p class="text-muted">No movies found.</p>
  </div>
  {% endfor %}
</div>

<hr class="my-5">

<!-- Mailing list signup -->
<h2 class="mb-3">ğŸ“¬ Join our mailing list</h2>
<form method="GET" action="{% url 'signup' %}" class="mb-3" style="max-width: 400px;">
  <div class="mb-3">
    <label for="email" class="form-label">Enter your email</label>
    <input id="email" name="email" type="email" class="form-control"
           placeholder="you@example.com" required>
  </div>
  <button type="submit" class="btn btn-primary">Sign Up</button>
</form>

{% endblock %}